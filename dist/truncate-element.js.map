{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/truncate-element.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","TruncateElement","HTMLElement","super","_highlightQuery","config","number","more","less","completeWord","hashtag","hasLiteral","highlightCondition","highlightList","color","mention","text","replace","connectedLoaded","dataLoaded","tempHtml","MutationObserver","this","initialValues","observe","characterData","childList","attributes","attrName","_oldVal","_newVal","innerHTML","conf","getAttribute","length","JSON","parse","sort","a","b","instanceOfHighlighQuery","fill","remainText","cutFindHighlight","span","document","createElement","style","cursor","classList","add","addEventListener","event","showFullText","hideSomeText","appendChild","whiteSpace","mouseDown","stopPropagation","highlightQuery","checkWordCut","substring","findHashtag","findMention","highlight","content","q","pattern","RegExp","match","words","word","customElements","define"],"mappings":"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","file":"truncate-element.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import { HighlighQuery, Config } from \"./interfaces\";\r\nexport { Config, HighlighQuery } from \"./interfaces\"\r\n\r\nexport class TruncateElement extends HTMLElement {\r\n    _highlightQuery: Array<HighlighQuery | string> = [];\r\n    config: Config = {\r\n        number: 0,\r\n        more: \"\",\r\n        less: \"\",\r\n        completeWord: false,\r\n        hashtag: false,\r\n        hasLiteral: false,\r\n        highlightCondition: 'exactly',\r\n        highlightList: [{ name: '', color: '' }],\r\n        mention: false\r\n    };\r\n    number: number = 100;\r\n    more: string = \"show\";\r\n    less: string = \"hide\";\r\n    completeWord: boolean = false;\r\n    hashtag: boolean = false;\r\n    hasLiteral: boolean = false;\r\n    highlightCondition: string = 'exactly';\r\n    highlightList: HighlighQuery[] = [{ name: '', color: '' }];\r\n    text: string = \"\"\r\n    replace: boolean = false;\r\n    mention: boolean = false;\r\n\r\n    connectedLoaded = false;\r\n    dataLoaded = false;\r\n    tempHtml = \"\";\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        const observer = new MutationObserver(() => {\r\n            if (this.connectedLoaded && !this.dataLoaded) {\r\n                this.initialValues();\r\n            }\r\n        });\r\n        // call 'observe' on that MutationObserver instance, \r\n        // passing it the element to observe, and the options object\r\n        observer.observe(this, { characterData: false, childList: true, attributes: false });\r\n    }\r\n\r\n    private instanceOfHighlighQuery(object: any): object is HighlighQuery {\r\n        return typeof object === 'string' ? false : 'name' in object;\r\n    }\r\n\r\n    connectedCallback() {\r\n        this.initialValues();\r\n        this.connectedLoaded = true;\r\n    }\r\n\r\n    attributeChangedCallback(attrName: string, _oldVal: any, _newVal: any) {\r\n        if (this.connectedLoaded) {\r\n            this.initialValues(attrName);\r\n        }\r\n    }\r\n\r\n    static get observedAttributes() {\r\n        return ['config'];\r\n    }\r\n\r\n    private initialValues(attrName: string = \"config\") {\r\n\r\n        if (!this.innerHTML) {\r\n            return;\r\n        }\r\n        if (!this.tempHtml) {\r\n            this.tempHtml = this.innerHTML;\r\n        }\r\n\r\n        const conf = this.getAttribute(attrName);\r\n        if (conf?.length) {\r\n            this.config = JSON.parse(conf);\r\n            this.number = this.config.number ? this.config.number : this.number;\r\n            this.more = this.config.more ? this.config.more : this.more;\r\n            this.less = this.config.less ? this.config.less : this.less;\r\n            this._highlightQuery = this.config.highlightList ? this.config.highlightList : this._highlightQuery;\r\n            this.highlightCondition = this.config.highlightCondition ? this.config.highlightCondition : this.highlightCondition;\r\n            this.completeWord = this.config.completeWord ? this.config.completeWord : this.completeWord;\r\n            this.hashtag = this.config.hashtag ? this.config.hashtag : this.hashtag;\r\n            this.hasLiteral = this.config.hasLiteral ? this.config.hasLiteral : this.hasLiteral;\r\n            this.mention = this.config.mention ? this.config.mention : this.mention;\r\n        }\r\n        else\r\n            return;\r\n\r\n        if (this._highlightQuery && this._highlightQuery.length)\r\n            this._highlightQuery.sort((a: HighlighQuery | string, b: HighlighQuery | string): number => {\r\n                if (this.instanceOfHighlighQuery(a) && this.instanceOfHighlighQuery(b)) {\r\n                    if (a.name && b.name)\r\n                        return a.name.length - b.name.length;\r\n                }\r\n                else if (typeof a === 'string' && this.instanceOfHighlighQuery(b)) {\r\n                    if (b.name)\r\n                        return a.length - b.name.length;\r\n                }\r\n                else if (this.instanceOfHighlighQuery(b) && typeof a === 'string') {\r\n                    if (b.name)\r\n                        return a.length - b.name.length;\r\n                }\r\n                else if (typeof b === 'string' && typeof a === 'string') {\r\n                    return a.length - b.length\r\n                }\r\n                else\r\n                    return 0;\r\n                return 0;\r\n            });\r\n        this.fill(this.tempHtml);\r\n        this.dataLoaded = true;\r\n    }\r\n\r\n    fill(text: string) {\r\n        if (!this.hasLiteral) text = text.replace(/(\\r\\n\\t|\\n|\\r\\t)/gm, ' ');\r\n        this.text = text;\r\n        let remainText = \"\";\r\n        if (text.length > this.number) {\r\n            remainText = this.cutFindHighlight(this.completeWord, this.hashtag, this.mention, text, this.highlightCondition, this._highlightQuery, this.number);\r\n            // برای نمایش ادامه یا پنهان\r\n            this.replace = true;\r\n            this.innerHTML = remainText + ' ... ';\r\n            const span = document.createElement('span');\r\n            span.innerHTML = this.more;\r\n            span.style.color = '#ff00ff';\r\n            span.style.cursor = 'pointer';\r\n            span.classList.add(\"toggleText\");\r\n            this.innerHTML = remainText + \"... \";\r\n\r\n            span.addEventListener('click', (event) => this.replace === true ? this.showFullText(event) : this.hideSomeText(event));\r\n            this.appendChild(span);\r\n        }\r\n        else {\r\n            text = this.cutFindHighlight(this.completeWord, this.hashtag, this.mention, text, this.highlightCondition, this._highlightQuery);\r\n            this.innerHTML = text;\r\n        }\r\n        //اعمال شود این کلاس قرار داده می شود  html در \\n برای اینکه کاراکتر های\r\n        if (this.hasLiteral)\r\n            this.style.whiteSpace = 'pre-line';\r\n    }\r\n\r\n\r\n\r\n    /*\r\n     * نمایش کامل متن\r\n     * @param mouseDown {mousedown} mouse event\r\n     */\r\n    showFullText(mouseDown: MouseEvent) {\r\n        const span = document.createElement('span');\r\n        span.innerHTML = \" \" + this.less;\r\n        span.style.color = '#ff00ff';\r\n        span.style.cursor = 'pointer';\r\n        span.classList.add(\"toggleText\");\r\n        this.innerHTML = this.cutFindHighlight(this.completeWord, this.hashtag, this.mention, this.text, this.highlightCondition, this._highlightQuery);\r\n        //اعمال شود این کلاس قرار داده می شود  html در \\n برای اینکه کاراکتر های\r\n        if (this.hasLiteral)\r\n            this.style.whiteSpace = 'pre-line';\r\n\r\n        span.addEventListener('click', (event) => this.hideSomeText(event));\r\n        this.appendChild(span);\r\n        // جلوگیری از کلیک روی عنصر پدر\r\n        mouseDown.stopPropagation();\r\n        this.replace = false;\r\n    }\r\n    /*\r\n     * نمایش قسمتی از متن بر اساس تعداد کاراکتر خواسته شده\r\n     * @param mouseDown {mousedown} mouse event\r\n     */\r\n    hideSomeText(mouseDown: MouseEvent) {\r\n        const remainText = this.cutFindHighlight(this.completeWord, this.hashtag, this.mention, this.text, this.highlightCondition, this._highlightQuery, this.number);\r\n        const span = document.createElement('span');\r\n        span.style.color = '#ff00ff';\r\n        span.classList.add(\"toggleText\")\r\n\r\n        span.innerHTML = this.more;\r\n        this.innerHTML = remainText + ' ... ';\r\n        //اعمال شود این کلاس قرار داده میشود  html در  n \\برای اینکه کاراکتر های\r\n        if (this.hasLiteral)\r\n            this.style.whiteSpace = 'pre-line';\r\n\r\n        span.addEventListener('click', (event) => this.showFullText(event));\r\n        this.appendChild(span);\r\n        // جلوگیری از کلیک روی عنصر پدر\r\n        mouseDown.stopPropagation();\r\n        this.replace = true;\r\n    }\r\n\r\n    /** implement cut text, find hashtag and mention and highlight \r\n     * @param completeWord {boolean} condition to cut\r\n     * @param hashtag {boolean} condition to find hashtag\r\n     * @param mention {boolean} condition to find mentiong\r\n     * @param text {string} text to cut\r\n     * @param highlightCondition {string} condition to highlight\r\n     * @param highlightQuery {string} query to highlight\r\n     * @returns {string} cutted text\r\n    */\r\n    cutFindHighlight(completeWord: boolean, hashtag: boolean, mention: boolean, text: string, highlightCondition = 'exactly', highlightQuery: Array<HighlighQuery | string> = [], number?: number) {\r\n        if (number)\r\n            text = completeWord ? this.checkWordCut(number, text) : text.substring(0, number);\r\n        text = hashtag ? this.findHashtag(text) : text;\r\n        text = mention ? this.findMention(text) : text;\r\n        text = this.highlight(text, highlightCondition, highlightQuery);\r\n        return text;\r\n    }\r\n\r\n\r\n    /**\r\n     * رنگ کردن کلمات داده شده در متن\r\n     * @param content\r\n     */\r\n    highlight(content: string, highlightCondition = \"\", highlightQuery: Array<HighlighQuery | string>): string {\r\n        //روی دایرکتیو تعریف نشود خود متن را بر می کرداند highlightList اگر ورودی\r\n        if (!highlightQuery || !highlightQuery.length) {\r\n            return content;\r\n        }\r\n        // دقیقا یافت می شود  highlightList روی دایرکتیو تعریف نشود کلمات داده شده در highlightCondition اگر ورودی\r\n        if (highlightCondition == \"exactly\") {\r\n            for (let q of highlightQuery) {\r\n                let pattern = '';\r\n                //به صورت آبجکت باشند highlightList اگر کلمات داده شده در\r\n                if (typeof q !== 'string') {\r\n                    pattern = \"(^|(?<!\\\\p{L}))(\" + q.name + \")(?!(\\\\p{L}))\";\r\n                    const color = q.color ? q.color : 'yellow';\r\n                    content = content.replace(new RegExp(pattern, 'gmu'), match => {\r\n                        return `<span style=\"background:${color}\">${match}</span>`;\r\n                    });\r\n                }\r\n                //به صورت رشته باشند highlightList اگر کلمات داده شده در\r\n                else {\r\n                    pattern = \"(^|(?<!\\\\p{L}))(\" + q + \")(?!(\\\\p{L}))\";\r\n                    content = content.replace(new RegExp(pattern, 'gmu'), match => {\r\n                        return `<span style=\"background:yellow\">${match}</span>`;\r\n                    });\r\n                }\r\n            }\r\n            return content;\r\n        }\r\n        //هر مشابهی از کلمات در متن پیدا شده و رنگ می شوند\r\n        else {\r\n            for (let q of highlightQuery) {\r\n                //به صورت آبجکت باشند highlightList اگر کلمات داده شده در\r\n                if (typeof q !== 'string' && q.name) {\r\n                    let words = content.match(new RegExp(q.name, \"gmi\"));\r\n                    if (words)\r\n                        for (const word of words) {\r\n                            const color = q.color ? q.color : 'yellow';\r\n                            content = content.replace(new RegExp(q.name, \"gmi\"), `<span style=\"background-color:${color}\">${word}</span>`);\r\n                        }\r\n                }\r\n                //به صورت رشته باشند highlightList اگر کلمات داده شده در\r\n                else {\r\n                    if (typeof q === 'string') {\r\n                        let words = content.match(new RegExp(q, \"gmi\"));\r\n                        if (words)\r\n                            for (const word of words) {\r\n                                content = content.replace(new RegExp(q, \"gmi\"), `<span style=\"background-color:yellow\">${word}</span>`);\r\n                            }\r\n                    }\r\n                }\r\n            }\r\n            return content;\r\n        }\r\n    }\r\n\r\n    /** check the word cut */\r\n    checkWordCut(number: number, text: string) {\r\n        let i = 0\r\n        for (i = number; i < text.length; i++) {\r\n            if (text[i] == ' ') break;\r\n        }\r\n        return text.substring(0, i);\r\n    }\r\n\r\n    /** find hashtag from text */\r\n    findHashtag(text: string) {\r\n        text = text.replace(/(^|\\s)(#[\\p{Pc}\\p{N}\\p{L}\\u200cÀ-ÖØ-öø-ʸ(_)]+)/ugmi, (match) => {\r\n            return `<span class=\"hashtag\" style=\"color:#1b95e0\">${match}</span>`;\r\n        });\r\n        return text;\r\n    }\r\n\r\n    /** find mention from text */\r\n    findMention(text: string) {\r\n        text = text.replace(/(^|\\s)(@[^0-9|\\.](\\w{1,30}|\\.)+)/gmi, (match) => {\r\n            return `<span class=\"mention\" style=\"color:#0095f6\">${match}</span>`;\r\n        });\r\n        return text;\r\n    }\r\n\r\n}\r\ncustomElements.define('truncate-element', TruncateElement);\r\n\r\n"],"sourceRoot":""}